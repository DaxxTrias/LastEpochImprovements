#if SPECIALVERSION
using Il2CppDMM;
using Object = UnityEngine.Object;
namespace kg_LastEpoch_Improvements;
public static class RaresOnMap
{
    private const string Icon_Base64 = "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";
    private static Sprite icon;
    private static Sprite GetIcon()
    {
        if (icon) return icon;
        var texture = new Texture2D(1, 1);
        texture.LoadImage(Convert.FromBase64String(Icon_Base64));
        texture.Apply();
        icon = Sprite.Create(texture, new Rect(0, 0, texture.width, texture.height), new Vector2(0.5f, 0.5f));
        icon.name = "RaresOnMapIcon";
        return icon;
    }
    
    [HarmonyPatch(typeof(ActorSync),nameof(ActorSync.ReceiveInitDisplayInformation))]
    private static class ActorSync_MessageSyncRarit
    { 
        private static void Postfix(ActorSync __instance, byte rarity)
        {
            if (!kg_LastEpoch_Improvements.ShowRaresOnMap.Value) return;
            if (__instance.IsLocalPlayer || rarity <= 1) return;
            GameObject customMapIcon = Object.Instantiate(kg_LastEpoch_Improvements.CustomMapIcon, DMMap.Instance.iconContainer.transform);
            customMapIcon.SetActive(true);
            customMapIcon.GetComponent<kg_LastEpoch_Improvements.CustomIconProcessor>().Init(__instance.actorVisuals.gameObject, null);
            customMapIcon.GetComponent<Image>().enabled = false;
            customMapIcon.transform.GetChild(0).GetComponent<Image>().sprite = GetIcon();
        }
    }
}
#endif